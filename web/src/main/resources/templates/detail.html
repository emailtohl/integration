<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title></title>
<!-- load stylesheets -->
<!-- 
<link rel="stylesheet" href="http://fonts.useso.com/css?family=Open+Sans:300,400">  Google web font "Open Sans"
 -->
<link rel="stylesheet" href="resources/templates/css/bootstrap.min.css">                                      <!-- Bootstrap style -->
<link rel="stylesheet" href="resources/templates/css/templatemo-style.css">                                   <!-- Templatemo style -->
<style type="text/css">
	img.icon {
		width:32px;
	}
</style>

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

<body>

<div class="tm-header">
	<div class="container-fluid">
		<div class="tm-header-inner">
			<a href="#" class="navbar-brand tm-site-name">Classic</a>
			
			<!-- navbar -->
			<nav class="navbar tm-main-nav">

				<button class="navbar-toggler hidden-md-up" type="button" data-toggle="collapse" data-target="#tmNavbar">
					&#9776;
				</button>
				
				<div class="collapse navbar-toggleable-sm" id="tmNavbar">
					<ul class="nav navbar-nav">
						<li class="nav-item">
							<a href="index.html" class="nav-link">Home</a>
						</li>
						<li class="nav-item active">
							<a href="about.html" class="nav-link">About</a>
						</li>
						<li class="nav-item">
							<a href="blog.html" class="nav-link">Blog</a>
						</li>
						<li class="nav-item">
							<a href="contact.html" class="nav-link">Contact</a>
						</li>
					</ul>                        
				</div>
				
			</nav>  

		</div>                                  
	</div>            
</div>

<div class="tm-about-img-container">
	
</div>

<section class="tm-section">
	<div class="container-fluid">
		<div class="row tm-2-rows-sm-swap">
			<div class="col-xs-12 col-sm-12 col-md-4 col-lg-3 col-xl-3 tm-2-rows-sm-down-2">
				
				<h3 class="tm-gold-text">Sidebar Links</h3>
				
				<nav>
					<ul class="nav">
						<#list recentArticles as article>
							<li><a href="detail?id=${article.id?c}" class="tm-text-link">${article.title}</a></li>
						</#list>
					</ul>
				</nav>   

			</div>

			<div class="col-xs-12 col-sm-12 col-md-8 col-lg-9 col-xl-9 tm-2-rows-sm-down-1">
				<h3 class="tm-gold-text">${article.title}</h3>
				<p>
					<img class="icon" src="${article.author.iconSrc!}"> <strong>${article.author.email}</strong>
					<em>${article.creationTime?string("yyyy-MM-dd HH:mm:ss")}</em>
				</p>
				<div id="article-body">
					${article.body}
				</div>
			</div>
		</div>
		
		<div class="row tm-margin-t-mid col-md-8 col-md-offset-3">
			<div class="col-xs-12">
				<#list article.comments as comment>
					<p>
						<#if comment.icon??>
							<img class="icon" alt="" src="${comment.icon!}" >
						<#else>
							<img class="icon" alt="" src="lib/AdminLTE/img/user2-160x160.jpg" >
						</#if>
						<#if comment.critics??>
							<strong>${comment.critics!}</strong>
						<#else>
							<strong>匿名</strong>
						</#if>
						
						  <em>${comment.creationTime?string("yyyy-MM-dd HH:mm:ss")}</em>
					</p>
					<p>${comment.content?html}</p>
				</#list>
			</div>
			
			<#if article.canComment!true>
				<div class="col-xs-12">
					<h3 class="tm-gold-text">发表评论</h3>
					<p>
						<img class="icon" id="accountIcon" alt="" src="" >
						<span id="accountName"></span> 
					</p>
					<p class="row col-md-8">
						<form id="comment" action="cms/comment" method="post" enctype="application/x-www-form-urlencoded" accept-charset="UTF-8">
							<input type="hidden" name="articleId" value="${article.id?c}">
							<div class="form-group">
								<label for="comment">评论</label>
								<textarea name="content" cols="90" rows="8" maxlength="65525" aria-required="true" required="required"></textarea>
							</div>
							<div class="form-group">
								<input type="submit" class="btn btn-warning" value="提交">
							</div>
						</form>
					</p>
				</div>
				<#else>
				<strong>不能评论</strong>
			</#if>
		</div>

		<div class="row tm-margin-t-mid">
			<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 tm-sm-m-b">
				<h3 class="tm-gold-text">Pellentesque fermentum mauris</h3>
				<p>Vivamus vel leo vel nunc tincidunt mattis. Sed neque diam, semper suscipit dictum a, sodales ac metus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Morbi vel pharetra massa, non iaculis tortor. Nulla porttitor tincidunt felis et feugiat.</p>
				<p>Vivamus fermentum ligula justo, sit amet blandit nisl volutpat id. Fusce sagittis ultricies felis, non luctus mauris lacinia quis. Ut fringilla lacus ac tempor ullamcorper. Mauris iaculis placerat ex et mattis.</p>
			</div>

			<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
				<h3 class="tm-gold-text">Pellentesque fermentum mauris</h3>
				<p>
					Fusce in dapibus quam, eget finibus velit. Nullam erat odio, vulputate id est ut, consequat rutrum justo. Vivamus vel leo vel nunc tincidunt mattis. Sed neque diam, semper suscipit dictum a, sodales ac metus. Quisque vel sem eu turpis ullamcorper euismod. Praesent quis nisi ac augue luctus viverra. Sed et dui nisi.
				</p>
				<p>
					Fusce vitae dapibus justo. Pellentesque accumsan est ac posuere imperdiet. Curabitur eros mi, lacinia at euismod quis, dapibus vel ligula. Ut sodales erat vitae nunc tempor mollis.
				</p>
			</div>

		</div>

		<div class="row tm-margin-t-mid">
			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 col-xl-3">

				<div class="tm-content-box">
					<img src="resources/templates/img/tm-img-310x180-1.jpg" alt="Image" class="tm-margin-b-30 img-fluid">
					<h4 class="tm-margin-b-20 tm-gold-text">Lorem ipsum dolor #1</h4>
					<p class="tm-margin-b-20">Aenean cursus tellus mauris, quis
					consequat mauris dapibus id. Donec
					scelerisque porttitor pharetra</p>
					<a href="#" class="tm-btn text-uppercase">Detail</a>    
				</div>  

			</div>

			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 col-xl-3">

				<div class="tm-content-box">
					<img src="resources/templates/img/tm-img-310x180-2.jpg" alt="Image" class="tm-margin-b-30 img-fluid">
					<h4 class="tm-margin-b-20 tm-gold-text">Lorem ipsum dolor #2</h4>
					<p class="tm-margin-b-20">Aenean cursus tellus mauris, quis
					consequat mauris dapibus id. Donec
					scelerisque porttitor pharetra</p>
					<a href="#" class="tm-btn text-uppercase">Read More</a>    
				</div>  

			</div>

			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 col-xl-3">

				<div class="tm-content-box">
					<img src="resources/templates/img/tm-img-310x180-3.jpg" alt="Image" class="tm-margin-b-30 img-fluid">
					<h4 class="tm-margin-b-20 tm-gold-text">Lorem ipsum dolor #3</h4>
					<p class="tm-margin-b-20">Aenean cursus tellus mauris, quis
					consequat mauris dapibus id. Donec
					scelerisque porttitor pharetra</p>
					<a href="#" class="tm-btn text-uppercase">Detail</a>    
				</div>  

			</div>

			<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 col-xl-3">

				<div class="tm-content-box tm-margin-b-30">
					<a href="#" class="tm-text-link"><h4 class="tm-margin-b-20 tm-thin-font">Duis sit amet tristique #1</h4></a>
					<p class="tm-margin-b-30">Vestibulum arcu erat, lobortis sit amet tellus ut, semper tristique nibh. Nunc in molestie elit.</p><hr>
				</div>
				<div class="tm-content-box">
					<a href="#" class="tm-text-link"><h4 class="tm-margin-b-20 tm-thin-font">Duis sit amet tristique #2</h4></a>
					<p>Vestibulum arcu erat, lobortis sit amet tellus ut, semper tristique nibh. Nunc in molestie elit.</p>
				</div>  

			</div>
		</div> <!-- row -->

	</div>
</section>

<footer class="tm-footer">
	<div class="container-fluid">
		<div class="row">
			
			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-3 col-xl-3">
				
				<div class="tm-footer-content-box">
					<h3 class="tm-gold-text tm-title tm-footer-content-box-title">Proin eu posuere felis</h3>
					<div class="tm-gray-bg">
						<p>Aenean cursus tellus mauris, quis consequat mauris dapibus id. Donec scelerisque porttitor pharetra.</p>
						<p>Aenean cursus tellus mauris, quis consequat mauris dapibus id. Donec scelerisque porttitor pharetra.</p>
						<p><strong>Danny Egg (Executive)</strong></p>    
					</div>    
				</div>
										
			</div>

			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-3 col-xl-3">
				<div class="tm-footer-content-box tm-footer-links-container">
				
					<h3 class="tm-gold-text tm-title tm-footer-content-box-title">Nulla tortor dolor</h3>
					<nav>
						<ul class="nav">
							<li><a href="#" class="tm-footer-link">Tincidunt non faucibus</a></li>
							<li><a href="#" class="tm-footer-link">Vestibulum tempor</a></li>
							<li><a href="#" class="tm-footer-link">Fusce non turpis euismod</a></li>
							<li><a href="#" class="tm-footer-link">Lorem ipsum dolor sit</a></li>
							<li><a href="#" class="tm-footer-link">Nam in augue consectetur</a></li>
							<li><a href="#" class="tm-footer-link">Text Link Color #CCCC66</a></li>
						</ul>
					</nav>

				</div>
				
			</div>

			<!-- Add the extra clearfix for only the required viewport 
				http://stackoverflow.com/questions/24590222/bootstrap-3-grid-with-different-height-in-each-item-is-it-solvable-using-only
			-->
			<div class="clearfix hidden-lg-up"></div>

			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-3 col-xl-3">

				<div class="tm-footer-content-box">
				
					<h3 class="tm-gold-text tm-title tm-footer-content-box-title">Etiam mollis ornare</h3>
					<p class="tm-margin-b-30">Aenean cursus tellus mauris, quis consequat mauris dapibus id. Donec scelerisque porttitor pharetra.</p><hr class="tm-margin-b-30">
					<p class="tm-margin-b-30">Aenean cursus tellus mauris, quis consequat mauris dapibus id. Donec scelerisque porttitor pharetra.</p><hr class="tm-margin-b-30">
					<p class="tm-margin-b-30">Aenean cursus tellus mauris, quis consequat mauris dapibus id. Donec scelerisque porttitor pharetra.</p>
					<a href="#" class="tm-btn tm-btn-gray text-uppercase">Read More</a>

				</div>
				
			</div>

			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-3 col-xl-3">

				<div class="tm-footer-content-box">
				
					<h3 class="tm-gold-text tm-title tm-footer-content-box-title">Fusce non turpis</h3>
					<div class="tm-margin-b-30">
						<img src="resources/templates/img/tm-img-100x100-1.jpg" alt="Image" class="tm-footer-thumbnail">
						<img src="resources/templates/img/tm-img-100x100-2.jpg" alt="Image" class="tm-footer-thumbnail">
						<img src="resources/templates/img/tm-img-100x100-3.jpg" alt="Image" class="tm-footer-thumbnail">
						<img src="resources/templates/img/tm-img-100x100-4.jpg" alt="Image" class="tm-footer-thumbnail">
						<img src="resources/templates/img/tm-img-100x100-5.jpg" alt="Image" class="tm-footer-thumbnail">
						<img src="resources/templates/img/tm-img-100x100-6.jpg" alt="Image" class="tm-footer-thumbnail">
					</div>
					<p class="tm-margin-b-20">Curabitur dui massa, aliquam quis mi sed, tempor vulputate tellus. Sed vestibulum non neque.</p>
					<a href="#" class="tm-btn tm-btn-gray text-uppercase">Browse</a>

				</div>
				
			</div>


		</div>

		<div class="row">
			<div class="col-xs-12 tm-copyright-col">
				<p class="tm-copyright-text">Copyright &copy; 2016.Company name All rights reserved.<a target="_blank" href="http://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a></p>
			</div>
		</div>
	</div>
</footer>

<!-- load JS files -->
<script src="resources/templates/js/jquery-2.2.3.min.js"></script>             <!-- jQuery (https://jquery.com/download/) -->
<script src="resources/templates/js/tether.min.js"></script> <!-- Tether for Bootstrap, http://stackoverflow.com/questions/34567939/how-to-fix-the-error-error-bootstrap-tooltips-require-tether-http-github-h --> 
<script src="resources/templates/js/bootstrap.min.js"></script>                 <!-- Bootstrap (http://v4-alpha.getbootstrap.com/) -->
<script>
$(function() {
	$.get('authentication', function(data){
		console.log(data);
		var username = data.username || '';
		if (username == 'anonymousUser')
			username = '匿名';
		var iconSrc = data.iconSrc || 'lib/AdminLTE/img/user2-160x160.jpg';
		$('span#accountName').text(username);
		$('img#accountIcon').attr('src', iconSrc);
	});
	
	$('form#comment').on('submit', function(e) {
		e.preventDefault();
		//$(this).serialize()
		var form = new FormData(this);
		var articleId = form.get('articleId');
		articleId = parseInt(articleId);
		var content = form.get('content');
		//content = encodeURIComponent(content);
		var json = JSON.stringify({
			articleId : articleId,
			content : content,
		});
		$.ajax({
			type: 'POST',
			url: 'cms/comment',
			data: json,
			contentType: 'application/json;charset=UTF-8',
			success: function() {
				window.location.reload();
			},
		});
	});
});
</script>

</body>
</html>